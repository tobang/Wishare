<div
  tuiCardLarge
  appearance="floating"
  class="wishlist-card"
  *transloco="let t"
>
  <header tuiHeader class="card-header">
    <div class="header-left" (click)="openDetails()">
      <tui-icon icon="@tui.list" class="wishlist-icon"></tui-icon>
      <h3 tuiTitle class="card-title">{{ wishlist().title }}</h3>
    </div>
    <aside tuiAccessories class="drag-handle" cdkDragHandle>
      <tui-icon icon="@tui.grip-vertical" class="handle-icon"></tui-icon>
    </aside>
  </header>

  <div class="wishes-container">
    @if ((wishlist().wishes?.rows?.length || 0) > 3 && canScrollUp()) {
      <div class="scroll-indicator scroll-indicator-top">
        <tui-icon
          icon="@tui.chevron-up"
          class="scroll-arrow scroll-arrow-up"
        ></tui-icon>
      </div>
    }

    <section
      class="wishes-section"
      cdkDropList
      cdkDropListOrientation="vertical"
      [cdkDropListData]="wishlist().wishes?.rows || []"
      (cdkDropListDropped)="onWishDrop($event)"
      [cdkDropListLockAxis]="'y'"
      (scroll)="onScroll($event)"
    >
      @if (wishlist().wishes?.rows?.length) {
        @for (wish of wishlist().wishes?.rows; track wish.$id; let i = $index) {
          <wishare-wish
            cdkDrag
            [cdkDragData]="wish"
            [cdkDragLockAxis]="'y'"
            [wish]="wish"
            (wishClick)="onWishClick($event)"
          >
            <div class="wish-drag-placeholder" *cdkDragPlaceholder></div>
          </wishare-wish>
        }
      } @else {
        <div class="no-wishes">
          <span class="no-wishes-text">{{ t('wishlist.no-wishes') }}</span>
        </div>
      }
    </section>

    @if ((wishlist().wishes?.rows?.length || 0) > 3 && canScrollDown()) {
      <div class="scroll-indicator scroll-indicator-bottom">
        <tui-icon
          icon="@tui.chevron-down"
          class="scroll-arrow scroll-arrow-down"
        ></tui-icon>
      </div>
    }
  </div>

  <footer class="card-footer">
    <button
      tuiButton
      type="button"
      appearance="flat"
      size="s"
      iconStart="@tui.plus"
      (click)="createWish()"
    >
      {{ t('wishlist.add-wish') }}
    </button>
    <div class="footer-actions">
      <button
        tuiIconButton
        type="button"
        appearance="flat"
        size="s"
        iconStart="@tui.edit-2"
        (click)="editWishlist()"
      ></button>
      <button
        tuiIconButton
        type="button"
        appearance="flat"
        size="s"
        iconStart="@tui.trash-2"
        (click)="deleteWishlist()"
      ></button>
    </div>
  </footer>
</div>
