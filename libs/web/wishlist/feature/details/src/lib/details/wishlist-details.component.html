<!-- Header portal content - back button -->
<ng-template headerContent="left">
  <button
    tuiIconButton
    type="button"
    appearance="flat"
    size="m"
    (click)="navigateToBoard()"
  >
    <tui-icon icon="@tui.chevron-left" />
  </button>
</ng-template>

@if (wishlistStream().isLoading) {
  <tui-loader class="loader-centered" [overlay]="true"></tui-loader>
} @else {
  @if (wishlistStream().value; as wishlist) {
    <!-- Header portal content - page title -->
    <ng-template headerContent="center">
      <h1>{{ wishlist.title }}</h1>
    </ng-template>

    <div class="details-container">
      <header class="details-header" tuiHeader>
        <h1 tuiTitle>
          {{ wishlist.title }}
          @if (wishlist.description) {
            <span class="wishlist-description">{{ wishlist.description }}</span>
          }
        </h1>
      </header>

      <div class="wishes-grid">
        @for (wish of wishlist.wishes?.rows || []; track wish.$id) {
          <wishare-wish-card
            [wish]="wish"
            [isOwner]="isWishOwner(wish)"
            [isReservedByMe]="isReservedByCurrentUser(wish)"
            (reserve)="onReserveWish($event)"
            (unreserve)="onUnreserveWish($event)"
            (delete)="onDeleteWish($event)"
            (edit)="onEditWish($event)"
          ></wishare-wish-card>
        } @empty {
          <div class="empty-state">No wishes found in this list.</div>
        }
      </div>
    </div>
  }
}
