@let wishlists = wishLists();
@let loading = isLoading();

<div class="board-wrapper" *transloco="let t">
  <header class="board-header">
    <div class="header-content">
      <h1 class="board-title">{{ t('board.header.title') }}</h1>
      @if (wishlists && wishlists.length > 0) {
        <span class="wishlist-count"
          >{{ wishlists.length }}
          {{
            wishlists.length === 1
              ? t('board.header.list')
              : t('board.header.lists')
          }}</span
        >
      }
    </div>
    @if (!loading && wishlists && wishlists.length > 0) {
      <button
        tuiButton
        type="button"
        appearance="primary"
        size="m"
        iconStart="@tui.plus"
        (click)="createWishlist()"
      >
        {{ t('board.header.new-button') }}
      </button>
    }
  </header>

  @if (loading) {
    <div class="wishlist-grid">
      @for (i of [1, 2, 3]; track i) {
        <div tuiCardLarge appearance="floating" class="skeleton-card">
          <header tuiHeader>
            <h2 tuiTitle [tuiSkeleton]="true">Wishlist title here</h2>
          </header>
          <section class="skeleton-content">
            @for (j of [1, 2, 3]; track j) {
              <div class="skeleton-wish" [tuiSkeleton]="true">
                <span>Loading wish item...</span>
              </div>
            }
          </section>
          <footer class="skeleton-footer">
            <span [tuiSkeleton]="true">Actions here</span>
          </footer>
        </div>
      }
    </div>
  } @else if (wishlists && wishlists.length > 0) {
    <div
      class="wishlist-grid"
      cdkDropListOrientation="mixed"
      cdkDropList
      [cdkDropListData]="wishlists"
      (cdkDropListDropped)="drop($event)"
      cdkDropListGroup
    >
      @for (wishlist of wishlists; track wishlist.$id) {
        <div
          class="wishlist-item"
          [cdkDragData]="wishlist"
          cdkDrag
          wishare-wish-list
          [wishlist]="wishlist"
          (createWishClick)="createWish($event)"
          (editWishlistClick)="editWishlist($event)"
          (deleteWishlistClick)="deleteWishlist($event)"
        >
          <div class="wishlist-drag-preview" *cdkDragPreview>
            <tui-icon icon="@tui.gift"></tui-icon>
            <span>{{ wishlist.title }}</span>
          </div>
          <div class="drag-placeholder" *cdkDragPlaceholder></div>
        </div>
      }
    </div>
  } @else {
    <div class="empty-state">
      <div class="empty-state-icon">
        <tui-icon icon="@tui.gift"></tui-icon>
      </div>
      <h2>{{ t('board.empty.title') }}</h2>
      <p>
        {{ t('board.empty.text') }}
      </p>
      <button
        tuiButton
        type="button"
        appearance="primary"
        size="l"
        iconStart="@tui.plus"
        (click)="createWishlist()"
      >
        {{ t('board.empty.button') }}
      </button>
    </div>
  }
</div>
