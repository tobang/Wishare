<div class="nav-wrapper">
  <div class="grad-bar"></div>
  <nav class="navbar" *transloco="let t">
    <span class="logo" routerLink="/"
      ><img src="assets/images/ws_logo.svg" alt=""
    /></span>
    <div
      class="menu-toggle"
      [ngClass]="menuOpen ? 'is-active' : ''"
      id="mobile-menu"
      (click)="toggleMenu()"
    >
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </div>
    <div class="nav-right">
      <ul class="nav nav-animate" [ngClass]="menuOpen ? 'mobile-nav' : ''">
        <li class="nav-item">
          <a href="javascript:void(0)" routerLink="/">{{
            t('navbar.homepage')
          }}</a>
        </li>
        @if (!authenticated()) {
          <li class="nav-item">
            <a href="javascript:void(0)" routerLink="/signup">{{
              t('navbar.signup')
            }}</a>
          </li>
        }
        @if (!authenticated()) {
          <li class="nav-item">
            <a href="javascript:void(0)" routerLink="/login">{{
              t('navbar.login')
            }}</a>
          </li>
        }
        @if (authenticated()) {
          <li class="nav-item">
            <a href="javascript:void(0)" routerLink="/wishlists">{{
              t('navbar.wishlists')
            }}</a>
          </li>
        }
      </ul>
      @if (authenticated() && userName()) {
        <span
          (tuiActiveZoneChange)="onAvatarMenuActiveZone($event)"
          (tuiObscured)="onAvatarMenuObscured($event)"
        >
          <div
            class="user-avatar"
            size="s"
            [tuiAvatar]="userName()! | tuiInitials"
            [tuiDropdown]="avatarDropdown"
            [tuiDropdownManual]="avatarMenuOpen"
            (click)="toggleAvatarMenu()"
          ></div>
          <ng-template #avatarDropdown>
            <tui-data-list role="menu">
              @for (lang of availableLanguages; track lang.code) {
                <button
                  tuiOption
                  new
                  type="button"
                  role="menuitem"
                  (click)="onSwitchLanguage(lang.code)"
                  [class.active-language]="currentLang() === lang.code"
                >
                  <span class="language-flag">{{ lang.flag }}</span>
                  <span>{{ lang.name }}</span>
                  @if (currentLang() === lang.code) {
                    <tui-icon icon="@tui.check" class="language-check" />
                  }
                </button>
              }
              <button
                tuiOption
                new
                type="button"
                role="menuitem"
                (click)="onLogout()"
              >
                <tui-icon icon="@tui.log-out" />
                <span>{{ t('navbar.logout') }}</span>
              </button>
            </tui-data-list>
          </ng-template>
        </span>
      }
    </div>
  </nav>
</div>
